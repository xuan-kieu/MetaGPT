<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroPath AI System</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        <header class="main-header">
            <div class="logo-section">
                <div class="logo-box">NP</div>
                <div class="logo-text">
                    <h1>NeuroPath</h1>
                    <div class="logo-subtext">AI Developmental System</div>
                </div>
            </div>

            <div class="nav-controls">
                <div class="privacy-wall">
                    <div class="privacy-dot"></div>
                    Privacy Wall Active: No Raw Data Egress
                </div>

                <div class="nav-pill-group">
                    <button class="nav-pill" id="btn-patient">Patient App</button>
                    <button class="nav-pill active" id="btn-clinician">Clinician Dashboard</button>
                </div>
            </div>
        </header>

        <main class="main-content">
            
            <div id="game-view" class="game-container">
                <div class="text-center game-header">
                    <h2>Let's Play a Game!</h2>
                    <p>Find 10 clouds to complete the session.</p>
                </div>

                <div class="stimulus-canvas">
                    <div class="stimulus-bg-text">Follow the Happy Cloud!</div>
                    
                    <div class="score-badge">Found: <span id="score-counter">0</span> / 10</div>

                    <button id="cloud-btn" class="game-ball" style="top: 50%; left: 50%;">
                        ‚òÅÔ∏è
                    </button>

                    <div class="status-label">[LOCAL FEATURE EXTRACTION RUNNING]</div>
                </div>
            </div>

            <div id="dashboard-view" class="hidden">
                <div class="game-header" style="margin-bottom: 2rem;">
                    <h2>Clinical Overview</h2>
                    <p>Subject: ANON_ID_1003</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Longitudinal Behavioral Index</h3>
                            <p>Temporal variance tracking across sessions</p>
                        </div>
                        
                        <div style="width: 100%; height: 300px; position: relative;">
                            <div style="position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: space-between; color: var(--slate-300); font-size: 0.75rem; pointer-events: none;">
                                <div style="border-bottom: 1px dashed var(--slate-100); flex:1;"></div>
                                <div style="border-bottom: 1px dashed var(--slate-100); flex:1;"></div>
                                <div style="border-bottom: 1px dashed var(--slate-100); flex:1;"></div>
                                <div style="border-bottom: 1px dashed var(--slate-100); flex:1;"></div>
                            </div>

                            <svg viewBox="0 0 800 300" style="width: 100%; height: 100%; overflow: visible;">
                                <defs>
                                    <linearGradient id="purpleGradient" x1="0" y1="0" x2="0" y2="1">
                                        <stop offset="0%" stopColor="#6366f1" stopOpacity="0.5"/>
                                        <stop offset="100%" stopColor="#6366f1" stopOpacity="0"/>
                                    </linearGradient>
                                </defs>
                                <path d="M0,250 C150,150 300,50 400,50 S650,150 800,200" 
                                      fill="none" stroke="#6366f1" stroke-width="4" stroke-linecap="round"/>
                                <path d="M0,250 C150,150 300,50 400,50 S650,150 800,200 L800,300 L0,300 Z" 
                                      fill="url(#purpleGradient)" style="opacity: 0.3;"/>
                            </svg>

                            <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.75rem; color: var(--slate-400);">
                                <span>11/1/2023</span>
                                <span>11/15/2023</span>
                                <span>12/5/2023</span>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                        
                        <div class="card" style="display: flex; flex-direction: column; justify-content: center; min-height: 240px;">
                            <div class="card-header">
                                <h3>AI Behavioral Analysis</h3>
                            </div>

                            <div id="analysis-loading" class="text-center hidden">
                                <div style="font-size: 2rem; margin-bottom: 1rem;">‚è≥</div>
                                <p style="font-size: 0.875rem; color: var(--slate-400);">Processing session data...</p>
                            </div>

                            <div id="analysis-result">
                                <div style="display: flex; align-items: baseline; gap: 0.5rem; margin-bottom: 0.5rem;">
                                    <span style="font-size: 2.5rem; font-weight: 800; color: var(--primary);">High Focus</span>
                                    <span class="tag">98% Accuracy</span>
                                </div>
                                <p style="font-size: 0.875rem; color: var(--slate-600); line-height: 1.6;">
                                    Subject demonstrated sustained attention with low latency in target tracking. Variance index remains within optimal range compared to baseline.
                                </p>
                                
                                <div class="confidence-bar">
                                    <span style="color: var(--slate-400);">AI Confidence</span>
                                    <div style="flex: 1; height: 6px; background: var(--slate-100); margin: 0 1rem; border-radius: 3px; overflow: hidden;">
                                        <div style="width: 92%; height: 100%; background: var(--primary);"></div>
                                    </div>
                                    <span style="font-weight: 700; color: var(--slate-800);">92%</span>
                                </div>
                            </div>
                        </div>

                        <div class="card privacy-card">
                            <div style="display: flex; gap: 1rem; align-items: flex-start;">
                                <div style="font-size: 1.5rem;">üõ°Ô∏è</div>
                                <div>
                                    <h4>Privacy Protocol</h4>
                                    <p>All behavioral features are extracted on-device. Zero raw video/audio data has been persisted or transmitted to the backend.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>

        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>System Architecture</h4>
                    <ul class="footer-list">
                        <li><span class="bullet">‚Ä¢</span> <strong>Stimulus Engine:</strong> Randomized visual tasks triggers behavioral responses.</li>
                        <li><span class="bullet">‚Ä¢</span> <strong>Local Feature Extractor:</strong> ML-based landmarking occurs entirely in-browser.</li>
                        <li><span class="bullet">‚Ä¢</span> <strong>L-TCN Inference:</strong> Temporal Convolutional Network analyzes variance across timestamps.</li>
                    </ul>
                </div>
                <div class="disclaimer-box">
                    <h4>Legal Disclaimer</h4>
                    <p>This system is for research and screening assistance only. It does not provide diagnostic labels or medical advice. Results should be interpreted by qualified professionals within the context of comprehensive clinical assessment.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Variables
        let foundCount = 0;
        const totalTargets = 10;
        
        // DOM Elements
        const cloudBtn = document.getElementById('cloud-btn');
        const scoreCounter = document.getElementById('score-counter');
        const gameView = document.getElementById('game-view');
        const dashboardView = document.getElementById('dashboard-view');
        const btnPatient = document.getElementById('btn-patient');
        const btnClinician = document.getElementById('btn-clinician');

        // Initial State Setup (Gi·∫£ l·∫≠p b·∫Øt ƒë·∫ßu game)
        function initGame() {
            btnPatient.classList.add('active');
            btnClinician.classList.remove('active');
            gameView.classList.remove('hidden');
            dashboardView.classList.add('hidden');
        }

        // Logic khi click v√†o m√¢y
        cloudBtn.addEventListener('click', () => {
            foundCount++;
            scoreCounter.innerText = foundCount;

            // Hi·ªáu ·ª©ng di chuy·ªÉn m√¢y ng·∫´u nhi√™n
            if (foundCount < totalTargets) {
                const randomX = Math.random() * 80 + 10; // 10% - 90%
                const randomY = Math.random() * 80 + 10;
                cloudBtn.style.left = randomX + '%';
                cloudBtn.style.top = randomY + '%';
            } else {
                // ƒê√£ t√¨m ƒë·ªß 10/10 -> K·∫øt th√∫c game
                finishGame();
            }
        });

        function finishGame() {
            // 1. Chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i Header
            btnPatient.classList.remove('active');
            btnClinician.classList.add('active');

            // 2. ·∫®n Game, Hi·ªán Dashboard
            gameView.classList.add('hidden');
            dashboardView.classList.remove('hidden');

            // 3. Gi·∫£ l·∫≠p hi·ªáu ·ª©ng Loading AI Analysis (Cho chuy√™n nghi·ªáp)
            const loadingDiv = document.getElementById('analysis-loading');
            const resultDiv = document.getElementById('analysis-result');
            
            resultDiv.classList.add('hidden');
            loadingDiv.classList.remove('hidden'); // Hi·ªán loading
            loadingDiv.style.display = 'block';

            setTimeout(() => {
                loadingDiv.style.display = 'none';
                resultDiv.classList.remove('hidden');
            }, 1500); // Sau 1.5s th√¨ hi·ªán k·∫øt qu·∫£
        }

        // Ch·∫°y kh·ªüi t·∫°o
        initGame();
    </script>
</body>
</html>